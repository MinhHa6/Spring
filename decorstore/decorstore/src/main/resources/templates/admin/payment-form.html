<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head th:replace="admin/fragments/head :: head"></head>

<body>
<div class="container mt-5">
    <div th:replace="admin/fragments/sidebar :: slide"></div>

    <div class="content p-4">
        <h2 th:text="${paymentMethod.id != null ? 'Chỉnh sửa phương thức thanh toán' : 'Thêm mới phương thức thanh toán'}"></h2>

        <form th:action="@{/payment/save}" th:object="${paymentMethod}" method="post" class="mt-4">

            <!-- Ẩn ID khi cập nhật -->
            <input type="hidden" th:if="${paymentMethod.id != null}" th:field="*{id}" />

            <!-- Giữ lại ngày tạo khi update để không bị mất -->
            <input type="hidden" th:field="*{createdDate}" />

            <div class="mb-3">
                <label class="form-label fw-bold">Tên phương thức thanh toán</label>
                <input type="text" class="form-control" th:field="*{name}"
                       placeholder="VD: Thanh toán khi nhận hàng, Chuyển khoản, Momo..." required>
            </div>

            <div class="mb-3">
                <label class="form-label fw-bold">Ghi chú</label>
                <textarea class="form-control" th:field="*{notes}" rows="3"
                          placeholder="Nhập mô tả hoặc hướng dẫn thêm..."></textarea>
            </div>

            <div class="form-check form-switch mb-3">
                <input class="form-check-input" type="checkbox" th:field="*{isActive}" id="isActive">
                <label class="form-check-label" for="isActive">Kích hoạt phương thức này</label>
            </div>

            <!-- Hiển thị ngày tạo và ngày cập nhật (chỉ khi chỉnh sửa) -->
            <div th:if="${paymentMethod.id != null}" class="mt-4 border-top pt-3">
                <p><strong>Ngày tạo:</strong>
                    <span th:text="${#temporals.format(paymentMethod.createdDate, 'dd/MM/yyyy HH:mm')}">--</span>
                </p>
                <p><strong>Ngày cập nhật gần nhất:</strong>
                    <span th:text="${#temporals.format(paymentMethod.updatedDate, 'dd/MM/yyyy HH:mm')}">--</span>
                </p>
            </div>

            <div class="d-flex justify-content-between mt-4">
                <a th:href="@{/payment}" class="btn btn-secondary">
                    <i class="fa fa-arrow-left"></i> Quay lại
                </a>
                <button type="submit" class="btn btn-success">
                    <i class="fa fa-save"></i> Lưu phương thức
                </button>
            </div>
        </form>
    </div>
</div>
<div th:replace="admin/fragments/script :: script"></div>
</body>
</html>
