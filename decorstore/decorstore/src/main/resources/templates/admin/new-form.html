<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="${news.id != null} ? 'Edit News' : 'Create News'">News Form</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-5">
    <h2 th:text="${news.id != null} ? 'Edit News' : 'Create New News'"></h2>

    <form th:action="@{/news/create}" th:object="${news}" method="post" enctype="multipart/form-data">

        <!-- ID ẩn -->
        <input type="hidden" th:field="*{id}"/>

        <!-- Tên bài viết -->
        <div class="mb-3">
            <label class="form-label">Name</label>
            <input type="text" th:field="*{name}" class="form-control" placeholder="Nhập tiêu đề tin tức" required>
        </div>

        <!-- Mô tả -->
        <div class="mb-3">
            <label class="form-label">Description</label>
            <textarea th:field="*{description}" class="form-control" rows="3"></textarea>
        </div>

        <!-- Ảnh -->
        <div class="mb-3">
            <label class="form-label">Image</label>
            <input type="file" name="imageFile" class="form-control">
        </div>


        <!-- Danh mục -->
        <div class="mb-3">
            <label class="form-label">News Category</label>
            <select th:field="*{idNewsCategory}" class="form-select">
                <option value="" disabled selected>-- Select Category --</option>
                <option th:each="c : ${newsCategories}"
                        th:value="${c.id}"
                        th:text="${c.name}">
                </option>
            </select>
        </div>

        <!-- Nội dung -->
        <div class="mb-3">
            <label class="form-label">Contents</label>
            <textarea th:field="*{contents}" class="form-control" rows="5"></textarea>
        </div>

        <!-- Tổng lượt xem -->
        <div class="mb-3">
            <label class="form-label">Total View</label>
            <input type="number" th:field="*{totalView}" class="form-control">
        </div>

        <!-- Link URL -->
        <div class="mb-3">
            <label class="form-label">Link URL</label>
            <input type="url" th:field="*{linkUrl}" class="form-control">
        </div>

        <!-- Hiển thị trang chủ -->
        <div class="mb-3">
            <label class="form-label">Show on Home</label>
            <select th:field="*{isHome}" class="form-select">
                <option th:value="true">Yes</option>
                <option th:value="false">No</option>
            </select>
        </div>

        <!-- SEO fields -->
        <div class="mb-3">
            <label class="form-label">Slug</label>
            <input type="text" th:field="*{slug}" class="form-control">
        </div>
        <div class="mb-3">
            <label class="form-label">Meta Title</label>
            <input type="text" th:field="*{metaTitle}" class="form-control">
        </div>
        <div class="mb-3">
            <label class="form-label">Meta Keyword</label>
            <input type="text" th:field="*{metaKeyword}" class="form-control">
        </div>
        <div class="mb-3">
            <label class="form-label">Meta Description</label>
            <textarea th:field="*{metaDescription}" class="form-control" rows="2"></textarea>
        </div>

        <!-- Created / Updated -->
        <div class="mb-3">
        <label class="form-label">Created Date:</label>
        <input type="text" class="form-control"
               th:value="${#temporals.format(news.createdDate, 'yyyy-MM-dd HH:mm:ss')}"
               readonly/>
        <!-- hidden để vẫn gửi createdDate -->
        <input type="hidden" th:field="*{createdDate}"/>
</div>

<div class="mb-3">
    <label class="form-label">Updated Date:</label>
    <input type="text" class="form-control"
           th:value="${#temporals.format(news.updatedDate, 'yyyy-MM-dd HH:mm:ss')}"
           readonly/>
</div>
        <div class="mb-3">
            <label class="form-label">Created By</label>
            <input type="text" th:field="*{createdBy}" class="form-control">
        </div>
        <div class="mb-3">
            <label class="form-label">Updated By</label>
            <input type="text" th:field="*{updatedBy}" class="form-control">
        </div>
        <div class="mb-3">
            <label class="form-label">Approver By</label>
            <input type="text" th:field="*{approverBy}" class="form-control">
        </div>

        <div class="mb-3 form-check">
            <input type="checkbox" class="form-check-input" th:field="*{isDelete}"/>
            <label class="form-check-label">Deleted</label>
        </div>
        <div class="mb-3 form-check">
            <input type="checkbox" class="form-check-input" th:field="*{isActive}"/>
            <label class="form-check-label">Active</label>
        </div>

        <div class="d-flex justify-content-between">
            <button type="submit" class="btn btn-success"
                    th:text="${news.id == null ? 'Create' : 'Update'}">Save</button>
            <a th:href="@{/news}" class="btn btn-secondary">Back to List</a>
        </div>
    </form>
</div>
</body>
</html>
