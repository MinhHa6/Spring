<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1.0">
    <title>Order - List</title>
    <link rel="stylesheet"
          href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
</head>
<body>
<div class="container mt-5">
    <h2 class="mb-4"> Order List</h2>
    <!-- Nút thêm mới Order -->
    <a th:href="@{/orders/create}" class="btn btn-primary mb-3">Add new Order</a>

    <!-- Kiểm tra nếu danh sách rỗng -->
    <div th:if="${orders.size() == 0}">
        <p>No order available</p>
    </div>

    <!-- Hiển thị danh sách đơn hàng -->
    <table class="table table-bordered table-striped" th:if="${orders.size() > 0}">
        <thead>
        <tr>
            <th>ID</th>                <!-- Khóa chính của đơn hàng (tự tăng trong DB) -->
            <th>Order Code</th>        <!-- Mã đơn hàng (idOrders, thường sinh tự động dạng code như ORD001) -->
            <th>Order Date</th>        <!-- Ngày đặt hàng (ordersDate) -->
            <th>Customer</th>          <!-- Tên khách hàng (lấy từ bảng Customer) -->
            <th>Payment Method</th>    <!-- Phương thức thanh toán (COD, Credit Card, Momo...) -->
            <th>Transport Method</th>  <!-- Phương thức vận chuyển (Giao nhanh, Giao thường...) -->
            <th>Total Money</th>       <!-- Tổng số tiền đơn hàng (totalMoney, tính từ orderDetails) -->
            <th>Notes</th>             <!-- Ghi chú đơn hàng (notes, ví dụ: giao ngoài giờ hành chính) -->
            <th>Receiver</th>          <!-- Tên người nhận hàng (nameReciver) -->
            <th>Address</th>           <!-- Địa chỉ giao hàng (address) -->
            <th>Email</th>             <!-- Email người nhận (email) -->
            <th>Phone</th>             <!-- Số điện thoại liên hệ (phone) -->
            <th>Active</th>            <!-- Trạng thái hoạt động (isActive: true = Active, false = Inactive) -->
            <th>Deleted</th>           <!-- Trạng thái xóa mềm (isDelete: true = Deleted, false = Available) -->
            <th>Actions</th>           <!-- Các hành động: Edit, Delete -->
        </tr>
        </thead>
        <tbody>
        <tr th:each="order : ${orders}">
            <td th:text="${order.id}"></td>
            <td th:text="${order.idOrders}"></td>
            <td th:text="${#temporals.format(order.ordersDate, 'yyyy-MM-dd HH:mm')}"></td>
            <td th:text="${order.customer != null ? order.customer.name : 'N/A'}"></td>
            <td th:text="${order.paymentMethod != null ? order.paymentMethod.name : 'N/A'}"></td>
            <td th:text="${order.transportMethod != null ? order.transportMethod.name : 'N/A'}"></td>
            <td th:text="${order.totalMoney}"></td>
            <td th:text="${order.notes}"></td>
            <td th:text="${order.nameReciver}"></td>
            <td th:text="${order.address}"></td>
            <td th:text="${order.email}"></td>
            <td th:text="${order.phone}"></td>
            <td>
        <span th:text="${order.isActive ? 'Active' : 'Inactive'}"
              th:classappend="${order.isActive ? 'text-success' : 'text-danger'}"></span>
            </td>
            <td>
        <span th:text="${order.isDelete ? 'Deleted' : 'Available'}"
              th:classappend="${order.isDelete ? 'text-danger' : 'text-success'}"></span>
            </td>
            <td>
                <a th:href="@{/orders/edit/{id}(id=${order.id})}" class="btn btn-warning btn-sm">Edit</a>
                <a th:href="@{/orders/delete/{id}(id=${order.id})}" class="btn btn-danger btn-sm"
                   onclick="return confirm('Are you sure you want to delete this order?')">Delete</a>
            </td>
        </tr>
        </tbody>

    </table>
</div>
</body>
</html>
