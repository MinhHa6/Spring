<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/heads :: head"></head>
<body class="goto-here">

<!-- Navbar -->
<div>
    <nav th:replace="fragments/nav :: nav"></nav>
</div>

<!-- Banner -->
<section id="home-section" class="hero">
    <div class="home-slider owl-carousel">
        <div class="slider-item" th:style="'background-image: url(https://images.unsplash.com/photo-1505691938895-1758d7feb511);'">
            <div class="overlay"></div>
        </div>
        <div class="slider-item" th:style="'background-image: url(https://images.unsplash.com/photo-1600585154340-be6161a56a0c);'">
            <div class="overlay"></div>
        </div>
    </div>
</section>


<!-- Services -->
<section class="ftco-section">
    <div class="container">
        <div class="row no-gutters ftco-services">
            <!-- Giao h√†ng nhanh -->
            <div class="col-md-3 text-center d-flex ftco-animate">
                <div class="media block-6 services">
                    <div class="icon bg-color-1 active d-flex justify-content-center align-items-center mb-2">
                        <span class="flaticon-shipped"></span>
                    </div>
                    <div class="media-body">
                        <h3 class="heading">Giao h√†ng to√†n qu·ªëc</h3>
                        <span>Mi·ªÖn ph√≠ cho ƒë∆°n tr√™n 2.000.000‚Ç´</span>
                    </div>
                </div>
            </div>

            <!-- S·∫£n ph·∫©m decor ch·∫•t l∆∞·ª£ng -->
            <div class="col-md-3 text-center d-flex ftco-animate">
                <div class="media block-6 services">
                    <div class="icon bg-color-2 d-flex justify-content-center align-items-center mb-2">
                        <span class="fa-solid fa-couch"></span>  <!-- sofa -->                    </div>
                    <div class="media-body">
                        <h3 class="heading">S·∫£n ph·∫©m cao c·∫•p</h3>
                        <span>Ch·∫•t li·ªáu b·ªÅn ƒë·∫πp, thi·∫øt k·∫ø tinh t·∫ø</span>
                    </div>
                </div>
            </div>

            <!-- ƒêa d·∫°ng m·∫´u m√£ -->
            <div class="col-md-3 text-center d-flex ftco-animate">
                <div class="media block-6 services">
                    <div class="icon bg-color-3 d-flex justify-content-center align-items-center mb-2">
                        <span class="fa-solid fa-lightbulb"></span> <!-- lamp -->
                    </div>
                    <div class="media-body">
                        <h3 class="heading">M·∫´u m√£ ƒëa d·∫°ng</h3>
                        <span>Ph√π h·ª£p nhi·ªÅu phong c√°ch kh√¥ng gian</span>
                    </div>
                </div>
            </div>

            <!-- T∆∞ v·∫•n t·∫≠n t√¢m -->
            <div class="col-md-3 text-center d-flex ftco-animate">
                <div class="media block-6 services">
                    <div class="icon bg-color-4 d-flex justify-content-center align-items-center mb-2">
                        <span class="fa-solid fa-headset"></span>      <!-- H·ªó tr·ª£ -->
                    </div>
                    <div class="media-body">
                        <h3 class="heading">H·ªó tr·ª£ t·∫≠n t√¢m</h3>
                        <span>H·ªó tr·ª£ ch·ªçn s·∫£n ph·∫©m & decor kh√¥ng gian</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
</section>

<section class="ftco-section ftco-category ftco-no-pt">
    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <div class="row">
                    <div class="col-md-6 order-md-last align-items-stretch d-flex">
                        <div class="category-wrap-2 ftco-animate img align-self-stretch d-flex"
                             th:style="'background-image: url(' + @{/assets/img/decor.jpg} + '); background-size: cover; background-position: center center; background-repeat: no-repeat;'">
                            <div class="text text-center">
                                <h2>Decor Store</h2>
                                <p>Kh√¥ng gian s·ªëng sang tr·ªçng, tinh t·∫ø<br>
                                    ƒêem ƒë·∫øn v·∫ª ƒë·∫πp v√† c·∫£m x√∫c trong t·ª´ng g√≥c nh·ªè</p>
                                <p><a th:href="@{/shop}" class="btn btn-primary">Kh√°m ph√° ngay</a></p>
                            </div>
                        </div>
                    </div>

                    <div class="col-md-6">
                        <div class="category-wrap ftco-animate img mb-4 d-flex align-items-end"
                             th:style="'background-image: url(' + @{/assets/img/den-decor.jpg} + '); background-size: cover; background-position: center center; background-repeat: no-repeat;'">
                            <div class="text px-3 py-1">
                                <h2 class="mb-0"><a th:href="@{/shop(category='den')}">ƒê√®n Decor</a></h2>
                            </div>
                        </div>

                        <div class="category-wrap ftco-animate img d-flex align-items-end"
                             th:style="'background-image: url(' + @{/assets/img/sofar.jpg} + '); background-size: cover; background-position: center center; background-repeat: no-repeat;'">
                            <div class="text px-3 py-1">
                                <h2 class="mb-0"><a th:href="@{/shop(category='sofa')}">Gh·∫ø & Sofa</a></h2>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="col-md-4">
                <div class="category-wrap ftco-animate img d-flex align-items-end"
                     th:style="'background-image: url(' + @{/assets/img/tranh-decor.jpg} + '); background-size: cover; background-position: center center; background-repeat: no-repeat;'">
                    <div class="text px-3 py-1">
                        <h2 class="mb-0"><a th:href="@{/shop(category='tranh')}">Tranh treo t∆∞·ªùng</a></h2>
                    </div>
                </div>

                <div class="category-wrap ftco-animate img d-flex align-items-end mt-4"
                     th:style="'background-image: url(' + @{/assets/img/binh-hoa.jpg} + '); background-size: cover; background-position: center center; background-repeat: no-repeat;'">
                    <div class="text px-3 py-1">
                        <h2 class="mb-0"><a th:href="@{/shop(category='binh-hoa')}">B√¨nh hoa & Decor nh·ªè</a></h2>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="ftco-section">
    <div class="container">
        <div class="row justify-content-center mb-3 pb-3">
            <div class="col-md-12 heading-section text-center ftco-animate">
                <span class="subheading">S·∫£n ph·∫©m n·ªïi b·∫≠t</span>
                <h2 class="mb-4">S·∫£n ph·∫©m c·ªßa ch√∫ng t√¥i</h2>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 col-lg-3 ftco-animate" th:each="pro : ${featuredProducts}">
                <div class="product">
                    <a th:href="@{/shop/{id}(id=${pro.id})}" class="img-prod">
                        <!-- C√ÅCH ƒê·ª†N GI·∫¢N NH·∫§T -->
                        <img class="img-fluid"
                             th:src="${'/uploads/' + #strings.replace(pro.mainImage, ' ', '_')}"
                             th:alt="${pro.name}"
                             onerror="this.onerror=null; this.style.opacity='0.3';">
                        <div class="overlay"></div>
                    </a>
                    <div class="text py-3 pb-4 px-3 text-center">
                        <h3>
                            <a th:href="@{/shop/{id}(id=${pro.id})}"
                               th:text="${pro.name}"></a>
                        </h3>
                        <div class="pricing">
                            <p class="price">
                                <span th:if="${pro.price != null}"
                                      th:text="${#numbers.formatInteger(pro.price, 0, 'POINT')} + ' ‚Ç´'"></span>
                                <span th:if="${pro.price == null}">Li√™n h·ªá</span>
                            </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<!-- N√∫t Messenger AI -->
<div id="ai-chat-btn" onclick="toggleChat()" title="H·ªèi AI">
    <i class="fa-solid fa-robot"></i>
</div>

<!-- Popup chat -->
<div id="ai-chat-popup">
    <div id="ai-chat-header">
        <span>üí¨ Chat v·ªõi AI</span>
        <button onclick="toggleChat()">‚úñ</button>
    </div>
    <div id="ai-chat-messages"></div>
    <div id="ai-chat-input">
        <input type="text" id="aiInput" placeholder="B·∫°n mu·ªën h·ªèi g√¨?" />
        <button onclick="sendMessage()">G·ª≠i</button>
    </div>
</div>

<section class="ftco-section testimony-section bg-light">
    <div class="container">
        <div class="row justify-content-center mb-5 pb-3">
            <div class="col-md-7 heading-section ftco-animate text-center">
                <span class="subheading">C·∫£m nh·∫≠n kh√°ch h√†ng</span>
                <h2 class="mb-4">Kh√°ch h√†ng n√≥i g√¨ v·ªÅ Decor Store</h2>
                <p class="text-muted">Nh·ªØng ph·∫£n h·ªìi ch√¢n th√†nh t·ª´ nh·ªØng ng∆∞·ªùi ƒë√£ tin t∆∞·ªüng v√† l·ª±a ch·ªçn s·∫£n ph·∫©m c·ªßa ch√∫ng t√¥i.</p>
            </div>
        </div>

        <div class="row ftco-animate">
            <div class="col-md-12">
                <div class="carousel-testimony owl-carousel">

                    <div class="item">
                        <div class="testimony-wrap p-4 pb-5 shadow-sm bg-white rounded">
                            <div class="user-img mb-4"
                                 th:style="'background-image: url(' + @{/assets/img/person_1.jpg} + '); background-size: cover;'">                                    <i class="icon-quote-left"></i>
                                </span>
                            </div>
                            <div class="text text-center">
                                <p class="mb-4 line">‚ÄúKh√¥ng gian ph√≤ng kh√°ch c·ªßa t√¥i tr·ªü n√™n sang tr·ªçng h∆°n r·∫•t nhi·ªÅu. Ch·∫•t l∆∞·ª£ng s·∫£n ph·∫©m tuy·ªát v·ªùi!‚Äù</p>
                                <p class="name fw-bold">Tr·∫ßn H·∫£i Quang</p>
                                <span class="position text-muted">H√† N·ªôi</span>
                            </div>
                        </div>
                    </div>

                    <div class="item">
                        <div class="testimony-wrap p-4 pb-5 shadow-sm bg-white rounded">
                            <div class="user-img mb-4"
                                 th:style="'background-image: url(' + @{/assets/img/person_2.jpg} + '); background-size: cover;'">                                <span class="quote d-flex align-items-center justify-content-center">
                                    <i class="icon-quote-left"></i>
                                </span>
                            </div>
                            <div class="text text-center">
                                <p class="mb-4 line">‚ÄúD·ªãch v·ª• t∆∞ v·∫•n r·∫•t t·∫≠n t√¢m, gi√∫p t√¥i ch·ªçn ƒë∆∞·ª£c b·ªô decor ph√π h·ª£p v·ªõi phong c√°ch Scandinavian.‚Äù</p>
                                <p class="name fw-bold">L·∫°i Tu·∫•n</p>
                                <span class="position text-muted">Nam ƒê·ªãnh</span>
                            </div>
                        </div>
                    </div>

                    <div class="item">
                        <div class="testimony-wrap p-4 pb-5 shadow-sm bg-white rounded">
                            <div class="user-img mb-4"
                                 th:style="'background-image: url(' + @{/assets/img/person_3.jpg} + '); background-size: cover;'">                                <span class="quote d-flex align-items-center justify-content-center">
                                    <i class="icon-quote-left"></i>
                                </span>
                            </div>
                            <div class="text text-center">
                                <p class="mb-4 line">‚ÄúS·∫£n ph·∫©m decor c·ª±c k·ª≥ tinh t·∫ø v√† hi·ªán ƒë·∫°i, giao h√†ng nhanh v√† ƒë√≥ng g√≥i r·∫•t k·ªπ.‚Äù</p>
                                <p class="name fw-bold">L√¢m</p>
                                <span class="position text-muted">H√† N·ªôi</span>
                            </div>
                        </div>
                    </div>

                    <div class="item">
                        <div class="testimony-wrap p-4 pb-5 shadow-sm bg-white rounded">
                            <div class="user-img mb-4"
                                 th:style="'background-image: url(' + @{/assets/img/person_4.jpg} + '); background-size: cover;'">                                <span class="quote d-flex align-items-center justify-content-center">
                                    <i class="icon-quote-left"></i>
                                </span>
                            </div>
                            <div class="text text-center">
                                <p class="mb-4 line">‚ÄúT√¥i mua b·ªô ƒë√®n decor ph√≤ng ng·ªß, √°nh s√°ng ·∫•m v√† tinh t·∫ø, ƒë√∫ng chu·∫©n phong c√°ch t√¥i mu·ªën.‚Äù</p>
                                <p class="name fw-bold">Tr·∫ßn Long</p>
                                <span class="position text-muted">C·∫ßn Th∆°</span>
                            </div>
                        </div>
                    </div>

                    <div class="item">
                        <div class="testimony-wrap p-4 pb-5 shadow-sm bg-white rounded">
                            <div class="user-img mb-4"
                                 th:style="'background-image: url(' + @{/assets/img/05.jpg} + '); background-size: cover;'">                                <span class="quote d-flex align-items-center justify-content-center">
                                    <i class="icon-quote-left"></i>
                                </span>
                            </div>
                            <div class="text text-center">
                                <p class="mb-4 line">‚ÄúDecor Store l√† l·ª±a ch·ªçn h√†ng ƒë·∫ßu c·ªßa t√¥i khi mu·ªën l√†m m·ªõi kh√¥ng gian s·ªëng.‚Äù</p>
                                <p class="name fw-bold">ƒê·∫∑ng Thanh Huy·ªÅn</p>
                                <span class="position text-muted">Hu·∫ø</span>
                            </div>
                        </div>
                    </div>

                </div> <!-- end carousel -->
            </div>
        </div>
    </div>
</section>


<footer th:replace="fragments/footers :: footer"></footer>
<div th:replace="fragments/scripts :: script"></div>
<script>
    function toggleChat() {
        const popup = document.getElementById('ai-chat-popup');
        popup.style.display = popup.style.display === 'flex' ? 'none' : 'flex';
    }

    function sendMessage() {
        const input = document.getElementById('aiInput');
        const msg = input.value.trim();
        if(!msg) return;

        // Hi·ªÉn th·ªã tin nh·∫Øn user
        const messagesDiv = document.getElementById('ai-chat-messages');
        const userMsgDiv = document.createElement('div');
        userMsgDiv.className = 'ai-message user-message';
        userMsgDiv.innerText = msg;
        messagesDiv.appendChild(userMsgDiv);
        messagesDiv.scrollTop = messagesDiv.scrollHeight;

        input.value = '';

        // G·ª≠i l√™n API
        fetch('/api/ai/chat', {
            method: 'POST',
            headers: {'Content-Type':'application/x-www-form-urlencoded'},
            body: new URLSearchParams({message: msg})
        })
        .then(res => res.text())
        .then(text => {
            const aiMsgDiv = document.createElement('div');
            aiMsgDiv.className = 'ai-message ai-response';
            aiMsgDiv.innerText = text;
            messagesDiv.appendChild(aiMsgDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        })
        .catch(err => {
            console.error(err);
            const aiMsgDiv = document.createElement('div');
            aiMsgDiv.className = 'ai-message ai-response';
            aiMsgDiv.innerText = 'L·ªói AI, vui l√≤ng th·ª≠ l·∫°i.';
            messagesDiv.appendChild(aiMsgDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        });
    }
</script>


</body>
</html>
